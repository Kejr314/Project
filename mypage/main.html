<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>마이페이지</title>
        <link rel="stylesheet" href="/ccs/mypage/mypage.css">
    </head>
    <body>
        <div id="wrap">
            <header>
                <div class="logo">
                    <a href="/index.html">
                        <img src="/image/video-console_2057777.png" width="100px" height="100px" alt="home"></div>
                    <!-- <a href="https://kr.freepik.com/search">Freepik 제작 아이콘</a> -->
                    </a>
                <div class="searchBar">
                    <input type="text" placeholder="검색하세요.">
                    <button type="button" onclick="navigateToSearch()">검색</button>
                </div>
            </header>
            
            <nav>
                <ul>
                    <li><a href="/game/main.html" class="nav-button game">게임</a></li>
                    <li><a href="/search/filter.html" class="nav-button search">조건 검색</a></li>
                    <li><a href="/mypage/main.html" id="nowPage" class="nav-button mypage">마이 페이지</a></li>
                    <li><a href="/customer/main.html" class="nav-button customer">고객센터</a></li>
                </ul>
            </nav>

            <main>
                <div class="layout-left">
                    <div class="mypage_warp">
                        <!-- 탭 버튼 목록 -->
                        <ul class="tab_wrap" role="tablist">
                            <li class="tab_item" role="presentation">
                                <button role="tab" aria-selected="true" aria-controls="tab-profileSetting" class="tab-button">프로필 설정</button>
                            </li>
                            <li class="tab_item" role="presentation">
                                <button role="tab" aria-selected="false" aria-controls="tab-profileInfo" class="tab-button">내 정보</button>
                            </li>
                            <li class="tab_item" role="presentation">
                                <button role="tab" aria-selected="false" aria-controls="tab-favorite" class="tab-button">즐겨찾기</button>
                            </li>
                            <li class="tab_item" role="presentation">
                                <button role="tab" aria-selected="false" aria-controls="tab-board" class="tab-button">등록한 글</button>
                            </li>
                        </ul>
                        <!-- 탭 내용 -->
                        <div class="tab-inner">
                            <div id="tab-profileSetting" role="tabpanel" class="tab-content profile">
                                <p>프로필 사진과 별명을 수정할 수 있습니다.</p>
                                <div class="profile-image">
                                    <img src="/image/basic_profile.png" alt="프로필 이미지">
                                    <button>사진 등록</button>
                                </div>
                                <div class="profile-nickName">
                                    <input type="text" placeholder="닉네임을 입력하세요">
                                    <button type="button" onclick="changeNickname()">닉네임 변경</button>
                                </div>
                            </div>

                            <div id="tab-profileInfo" rol="tabpanel" class="tab-content">
                                <div class="field">
                                    <div class="field-inner">
                                        <p><b>아이디 </b>user01</p>
                                    </div>
                                    <div class="field-inner">
                                        <p><b>비밀번호 </b><input type="password" class="userPw"></p>
                                    </div>
                                    <div class="field-inner">
                                        <p><b>비밀번호 확인 </b><input type="password" class="userPw"></p>
                                    </div>
                                    <div class="field-inner">
                                        <p><b>이름 </b>사용자</p>
                                    </div>
                                    <div class="field-inner">
                                        <p><b>생년월일 </b>2000년 12월 24일</p>
                                        </div>
                                    <div class="field-inner">
                                        <p><b>이메일 </b>user01@gamil.com</p>
                                    </div>
                                </div>
                                <div>
                                    <button type="button" onclick="userRemove()" class="userRemove-btn">회원 탈퇴</button>
                                </div>
                            </div>
                            <div id="tab-favorite" rol="tabpanel" class="tab-content">
                                <p>메인 화면에 표시할 게임을 최대 5개까지 설정할 수 있습니다.</p>
                                <div class="favorite-main">
                                    <div class="select-button">
                                        <button onclick="deleteSelected()">선택 삭제</button>
                                        <button onclick="deleteAll()">전체 삭제</button>
                                    </div>
                                    <table>
                                        <tbody>
                                            <tr>
                                                <th colspan="col"></th>
                                                <th colspan="col" class="gameName">게임명</th>
                                                <th colspan="col">선택</th>
                                                <th colspan="col">삭제</th>
                                            </tr>
                                            <tr>
                                                <td>1</td>
                                                <td><a href="/game/board/game1.html">스타듀벨리</a></td>
                                                <td><input onclick="countCheck(this)" type="checkbox" class="exposure-checkbox"></td>
                                                <td><button onclick="deleteRow(this)" class="deleteBtn">X</button></td>
                                            </tr>
                                            <tr>
                                                <td>2</td>
                                                <td><a href="/game/board/game1.html">스타듀벨리</a></td>
                                                <td><input onclick="countCheck(this)" type="checkbox" class="exposure-checkbox"></td>
                                                <td><button onclick="deleteRow(this)" class="deleteBtn">X</button></td>
                                            </tr>
                                            <tr>
                                                <td>3</td>
                                                <td><a href="/game/board/game1.html">스타듀벨리</a></td>
                                                <td><input onclick="countCheck(this)" type="checkbox" class="exposure-checkbox"></td>
                                                <td><button onclick="deleteRow(this)">X</button></td>
                                            </tr>
                                            <tr>
                                                <td>4</td>
                                                <td><a href="/game/board/game1.html">스타듀벨리</a></td>
                                                <td><input onclick="countCheck(this)" type="checkbox" class="exposure-checkbox"></td>
                                                <td><button onclick="deleteRow(this)">X</button></td>
                                            </tr>
                                            <tr>
                                                <td>5</td>
                                                <td><a href="/game/board/game1.html">스타듀벨리</a></td>
                                                <td><input onclick="countCheck(this)" type="checkbox" class="exposure-checkbox"></td>
                                                <td><button onclick="deleteRow(this)">X</button></td>
                                            </tr>
                                            <tr>
                                                <td>6</td>
                                                <td><a href="/game/board/game1.html">스타듀벨리</a></td>
                                                <td><input onclick="countCheck(this)" type="checkbox" class="exposure-checkbox"></td>
                                                <td><button onclick="deleteRow(this)">X</button></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div id="tab-board" rol="tabpanel" class="tab-content">
                                <p>등록한 글</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="layout-right">
                    <div class="user-profile">
                        <div class="profile">
                            <img src="/image/basic_profile.png">
                        </div>
                        <a href="/mypage/main.html" class="userInfo">사용자 님</a>
                        <a href="/index.html" class="logout-btn">로그아웃</a>
                    </div>

                    <h3>게시판 순위</h3>
                    <div class="game-ranking">
                        <ul>
                            <li class="gameRank1">
                                <a href="./game/board/game1.html">
                                    <span>게임1</span>
                                </a>
                            </li>
                            <li class="gameRank2">
                                <a href="./game/board/game2.html">게임2</a>
                            </li>
                            <li class="gameRank3">
                                <a href="./game/game3.html">게임3</a>
                            </li>
                            <li class="gameRank4">
                                <a href="./game/game4.html">게임4</a>
                            </li>
                            <li class="gameRank5">
                                <a href="./game/game5.html">게임5</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </main>
        </div>

        <script>
        function navigateToSearch(){
                    location.href = "/search/result.html";
                }

            function changeNickname(){
                alert("닉네임이 변경되었습니다.");
            }

            function userRemove(){
                alert("회원 탈퇴되었습니다.");
                location.href = "/index.html";
            }

            // 탭 기능
            document.addEventListener('DOMContentLoaded', function() { // DOM이 완전히 로드된 후 코드 실행
                // const : 재할당할 수 없는 변수 선언
                // querySeletorAll : 모든 탭 버튼과 탭 내용 요소를 선택
                const tabButtons = document.querySelectorAll('.tab-button');
                const tabContents = document.querySelectorAll('.tab-content');

                // 탭 활성화 : 선택된 탭 활성화, 다른 탭 비활성화
                function activateTab(tabButton) {
                    // 모든 탭 버튼과 내용 비활성화
                    tabButtons.forEach(button => { // forEach : 배열의 각 요소에 대해 함수 실행
                        button.classList.remove('profile'); // 요소의 클래스 제거
                        button.setAttribute('aria-selected', 'false'); // 요소의 속성 설정
                    });
                    tabContents.forEach(content => content.classList.remove('profile')); // 모든 탭 내용에서 'profile' 클래스 제거

                    // 선택된 탭 활성화
                    tabButton.classList.add('profile'); // 선택된 탭 버튼에 'profile' 클래스 추가
                    tabButton.setAttribute('aria-selected', 'true'); // aria-selected 속성을 true로 변경
                    // 선택된 탭에 해당하는 내용을 찾아 'profile' 클래스 추가
                    const tabContent = document.getElementById(tabButton.getAttribute('aria-controls')); 
                    tabContent.classList.add('profile'); 
                }

                    // 각 탭 버튼에 클릭 이벤트 리스너 추가
                    // 클릭 시 activateTab 함수 호출
                    tabButtons.forEach(button => {
                        button.addEventListener('click', () => activateTab(button));
                    });

                    // 초기 상태로 첫 번째 탭 활성화
                    activateTab(tabButtons[0]);

                    // URL 해시에 따라 탭 활성화
                    function activateTabFromHash() {
                        const hash = window.location.hash.substring(1); // '#' 제거
                        if (hash === 'favorite') {
                            const favoriteTab = document.querySelector('[aria-controls="tab-favorite"]');
                            if (favoriteTab) {
                                activateTab(favoriteTab);
                            }
                        }
                    }
                });

        // 즐겨찾기
            function deleteSelected() {
            const checkboxes = document.querySelectorAll('.exposure-checkbox:checked');
            checkboxes.forEach(checkbox => {
                checkbox.closest('tr').remove();
            });
        }

        function deletetAll() {
            const rows = document.querySelectorAll('.favorite-main tbody tr');
            rows.forEach(row => {
            row.remove();
        });
        }

        function deleteRow(button) {
            button.closest('tr').remove();
        }

        // 노출 여부 체크박스 제한 (최대 5개)
        function countCheck(obj){
            var chkBox = document.getElementsByClassName("exposure-checkbox"); // class name 값 exposure-checkbox 불러옴
            var chkCnt = 0; 
            for(var i = 0; i < chkBox.length; i++){
                if(chkBox[i].checked){ // chkBox가 checked 됐을 경우
                    chkCnt++; // 1씩 증가
                }
                if(chkCnt > 5){
                    alert("5개까지 선택할 수 있습니다.");
                    obj.checked = false;
                    return false;
                }
            }
        }

        </script>
    </body>
</html>